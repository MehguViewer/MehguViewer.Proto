---
title: 快速开始
description: MehguViewer 联邦协议简介。
---

# 快速开始

欢迎来到 **MehguViewer 协议** 文档。本指南将向您介绍架构、核心概念以及不同组件如何交互以创建无缝的联邦媒体体验。

## 什么是 MehguViewer？

MehguViewer 是一个**联邦媒体协议**，旨在去中心化漫画、动画和小说的消费。与传统的中心化平台不同，MehguViewer 允许多个独立服务器进行互操作，共享内容和用户身份，同时保持各自的主权。

它通过提供统一的 API 标准解决了社区碎片化的问题，任何客户端（Web、移动、桌面）都可以使用。

## 三大支柱

该架构建立在三个不同的支柱之上，每个支柱都有特定的职责：

### 1. Auth（身份提供者）
**Auth** 支柱是用户身份的唯一真实来源。它处理：
- **认证：** 符合 OIDC 的登录流程。
- **全局配置文件：** 您的用户名、头像和全局经验等级（XP）会随您在整个联邦中移动。
- **安全性：** 管理全局适用的屏蔽列表和静音列表，无论您身在何处都能保护您。

### 2. Core（内容交付）
**Core** 支柱负责实际媒体。它处理：
- **联邦内容：** 提供系列（漫画/动画/小说）和单元（章节/剧集）。
- **本地社交：** 存储在托管内容的特定 Core 服务器上的评论和投票。
- **性能：** 通过严格的缓存策略优化交付。

### 3. Web（客户端）
**Web** 支柱（或任何其他客户端）是用户交互的界面。它是无状态的，并聚合来自 Auth 和 Core 支柱的数据以呈现统一的 UI。

## 握手工作流程

了解客户端如何连接到联邦至关重要。以下是逐步握手工作流程：

1.  **客户端启动：**
    用户打开 MehguViewer 客户端并点击"登录"。

2.  **认证（Auth 支柱）：**
    客户端将用户重定向到 **Auth 服务器**。用户登录，Auth 服务器颁发一个 **访问令牌**（JWT）和一个 **刷新令牌**。

3.  **服务发现：**
    客户端想要查看特定的漫画。它将 URL 解析到特定的 **Core 服务器**。

4.  **握手（Core 支柱）：**
    客户端向 Core 服务器发出请求（例如，`GET /api/v1/series/123`），并在 `Authorization` 标头中附加 **访问令牌**。

5.  **验证：**
    Core 服务器接收请求。它**没有**用户的密码。相反，它从 Auth 服务器的 `/.well-known/jwks.json` 端点获取 **公钥（JWKS）**。

6.  **验证：**
    Core 服务器使用公钥验证访问令牌的签名。
    - 如果有效：Core 服务器信任令牌声明中包含的用户身份（用户 ID、全局等级）并提供内容。
    - 如果无效：请求被拒绝，返回 `401 Unauthorized` 错误。

这种"无状态认证"机制允许任何 Core 服务器信任来自 Auth 服务器的任何用户，而无需它们之间的直接数据库连接。
